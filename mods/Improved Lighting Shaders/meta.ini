[General]
gameName=FalloutNV
modid=69833
version=1.5.0.0b4a
newestVersion=1.5.0.0b4a
category="-1,"
nexusFileStatus=1
installationFile=Improved Lighting Shaders-69833-1-5beta4a-1668774269.zip
repository=Nexus
ignoredVersion=
comments=
notes=
nexusDescription="[b][size=5]Improved Lighting Shaders[/size][/b] (beta)\n<br />(formerly \"Pip-Boy Light Priority Fix\")\n<br />\n<br />New Vegas has a lighting problem, for some reason Bethesda limited their engine to a max of 4 lights per exterior cell, which caused a ton of eyesores: lights suddenly disappearing, terrain not lighting properly, lighting flickering as camera moves, etc...\n<br />The engine itself actually has room to work with 10 lights per cell, but for whatever reason the code interacting with the shaders (and the shaders themselves) are all limited to 4 lights, who knows why.\n<br />\n<br />But that's all in the past now - this plugin can fix the shading code to work with up to 13 light slots, and also includes 28 re-assembled shaders that make full use of them.\n<br />\n<br />[b]In other words this pretty much gets rid of the lighting bug, and your Pip-Light can shine brightly without interfering with other lights![/b]\n<br />Lights besides the Pip-Light are also improved: no more lights disappearing/reappearing depending on your camera position, or lines appearing when a light crosses cells - lights will now almost always remain lit if they're active!\n<br />\n<br />[b][size=5]Installation[/size][/b]\n<br />You should be able to install this fine using MO2 or something similar, otherwise:\n<br />[list]\n<br />[*]Extract ImprovedLightingShaders.dll &amp; ImprovedLightingShaders.ini into your Data&#92;NVSE&#92;Plugins&#92; folder.\n<br />[*]Extract the Shaders folder into Data&#92;Shaders&#92;, after extracting you should now have an ILS folder inside Data&#92;Shaders&#92;.\n<br />[*](If you use [url=https://www.nexusmods.com/newvegas/mods/69135]Millenia's Environment Map Shader Fix[/url]\xfeff you can grab the compatibility fix from the downloads section)\n<br />[*](If you use any ENB please read the Notes section below)\n<br />[*]Now run the game, once you're loaded into an exterior cell a \"hooked successfully\" message will appear in the console to let you know the plugin is active. (interior cells don't need any fix, so this plugin won't affect them)\n<br />[*]A good place to test this out is the grassy area in front of Gomorrah, but really the whole Strip seems affected.\n<br />[/list]\n<br />[b]If you notice any strange artifacts (eg. weird glowing colors)[/b]\xa0try adjusting the bIncreaseLightBuffers &amp; iMaxLightCount settings inside the ImprovedLightingShaders.ini, hopefully those might help.\n<br />After that if you still have any strange issues please let me know about it!\n<br />\n<br />As of 1.5beta3 there are now two new scripting/console commands, GetMaxLights will print the current max light count &amp; other INI settings, while SetMaxLights lets you change the light count at runtime - makes it a lot easier to compare between the base light limit (SetMaxLights 4) and the improved one (SetMaxLights 13 - make sure\xa0\x62IncreaseLightBuffers is set to 1 in the INI).\n<br />(Note that after using SetMaxLights you may need to move the camera or perform some action for the light data to be updated!)\n<br />\n<br />If you want to test ILS out you might want to try the \"slp 0000\" command, this'll hide almost everything except for terrain, so you can more easily see how the lighting effects it (recommend disabling collision with \"tlc\" too). Changing the max lights with SetMaxLights while in that mode should make it obvious how lower light counts can cause those weird unlit artifacts, and how ILS's increased light count almost completely fixes them. To get out of this mode just use \"slp 1111\"\n<br />\n<br />[b][size=5]Notes[/size][/b][list]\n<br />[*]If your game fails to launch after installing this plugin, try installing the latest Visual C++ Redist (vc_redist.x86.exe) from here: [url=https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads]https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads[/url]\xfeff\xfeff\n<br />[*]Certain meshes may start to render with a strange pink glow (this might only happen in certain configurations), changing the\xa0[b]bIncreaseLightBuffers [/b]setting inside the included ImprovedLightingShaders.ini to [b]1[/b] should hopefully fix that (will be set as default in future updates)\n<br />[*]If you use an ENB make sure [b]UseOriginalObjectsProcessing[/b] is set to true inside enbseries.ini - the replacement object shaders used by ENB sadly aren't compatible atm. (thanks to Elunico for reporting &amp; Matrimelee for finding the fix!)\n<br />[*]If you can't change that ENB setting for whatever reason (it might make some ENB settings look bad), maybe consider using the v1.3 \"Pip-Boy Light Priority Fix\" version of this mod instead.\n<br />it won't have the full effect of improving all the lights, but should help improve the Pip-Boy light at least (which is probably the worst offender when it comes to lighting bugs).[*]This includes the functionality of \"Pip-Boy Light Priority Fix\", so the Pip-Light will now also have priority over other lights.\n<br />[*]Remember that mods are almost always authored for the vanilla 4-light-limit, and may look different when used with ILS. Hopefully the difference is beneficial, otherwise you might need to ask the mod author about toning down the lights.\n<br />[*][b]Only exterior cells are affected by this plugin[/b], interior cells seem to handle lights a lot better and don't require a fix like this.\n<br />\n<br />[/list]\n<br />[size=5][b]Support[/b][/size]\n<br />In the off-chance someone would like to support my work I've setup a Ko-fi page here: [url=https://ko-fi.com/emoose]https://ko-fi.com/emoose[/url] - would be grateful for any help!\n<br />\n<br />[b][size=5]Changelog[/size]\n<br />[/b]\n<br />[b]v1.5beta2/beta3/beta4:[/b]\n<br />[list]\n<br />[*]beta4: now sets up an Opcode Base for our scripting functions (0x3900), should improve compatibility with other xNVSE plugins.\n<br />[*]beta4: ILS-modded shaders are now stored seperately to vanilla shaders (at Data/Shaders/ILS/), so that vanilla/GECK can still access the original unmodified shaders.\n<br />[*]beta3: fix off-by-one error when patching light limit, possibly allows an extra light to be displayed.\n<br />[*]beta3: add GetMaxLights &amp; SetMaxLights scripting/console commands (useful for testing what difference this can make!)\n<br />[*]Fix artifacts when using less than 13 lights (shader is always set to use 13 regardless of INI setting, so it ended up using random data.. found a way to clear that now though)\n<br />[*]Minor optimizations: skip some code our hook has to repeat, &amp; slightly improve some looping code\n<br />[*]bIncreaseLightBuffers: skip some patches that weren't actually needed\n<br />[/list]\n<br />[b]v1.5beta:[/b]\n<br />[list]\n<br />[*]Updated shaderpackages to support up to 13 lights per terrain-cell.\n<br />[*]Now includes an INI to tweak various settings. Defaults should be the safest to use, but lights can be expanded even further by taking a look at the INI file.\n<br />[*]Added patches to make the game use an expanded light-data buffer, with this in place 13 lights should be reasonably stable (at least, I didn't have any issues using it).\n<br />[/list]Expanding the light-data buffer requires over 100 patches to the game to work though, in my own testing it seemed stable enough, but others might run into something unexpected.\n<br />\n<br />Enabling these patches is optional however - but if you do try this option out and notice anything strange happening please let me know about it!\n<br />\n<br />[b]v1.4a:[/b]\n<br />[list]\n<br />[*]Now includes updates for all the other ShaderPackage files, no longer needs to force 019!\n<br />[*]Fixed a very tiny bug inside SLS2097, revealed by automated shader patcher, oops...\n<br />[/list]\n<br />[b]v1.4beta:[/b]\n<br />[list]\n<br />[*]Initial release, would force using ShaderPackage019 since that was the only one I'd updated so far.\n<br />[/list]\n<br />[b][size=5]Thanks[/size][/b]\n<br />Thanks to korri123 &amp; the xNVSE team for being so generous and continuing work with xNVSE, you rock!\n<br />Also thanks to TrueCourierSix for letting me know about JIP LN's source code, and jazzisparis for making JIP LN!\n<br />Many thanks to KiCHo666 for their [url=https://www.nexusmods.com/newvegas/mods/69135]Millenia's Environment Map Shader Fix[/url] mod, and allowing for a merged ShaderPackage to be made!\n<br />\n<br />[b][size=5]Technical Info[/size]\n<br />[/b]Source code can be found here: [url=https://gist.github.com/9a374004d80af699df8e91ff875a454b]main.cpp[/url] / [url=https://gist.github.com/3feb2cadd0a6a53374c6a49c98edcede]NiTypes.h[/url]\xa0/ [url=https://pastebin.com/eBHkzU75]ShaderPatcher.cs[/url]\n<br />Code for the modified shaders can be found in the files section.\n<br />\n<br />The 4 original lights the shaders used seem to be 1 ambient + 3 point/directional/etc, this mod extends the 3 to be 12, giving 13 total lights, hence the 4x claim in the header :)\n<br />\n<br />The 'cells' mentioned on this page refer to the cells used by the lighting/terrain code, which seem to be 1024x1024 units.\n<br />Actual game cells are 4096x4096, so I guess these should be 'micro-cells' or something?\n<br />It'd be neat if there was a way to resize them, if these cells could be made smaller that'd probably allow more lights on screen at once (since that'd split up the lights among even more cells, and they wouldn't have to compete for the 3-light limit as much), I haven't really looked into that at all though.\n<br />\n<br />The absolute light limit seems to be 13, at least when using SM2 shaders, since 13 lights will fill all 32 shader constant registers. SM3 shaders allow for 200+ constants though, so maybe eventually things could be ported over to there... but I'll leave that as an exercise for someone else :P\n<br />\n<br />[b][size=5]Other titles[/size][/b]\n<br />I've also made graphics fixes for some other games too, feel free to check them out!\n<br />LodMod for Yakuza 0: [url=https://steamcommunity.com/app/638970/discussions/0/1743343017611794579/]https://steamcommunity.com/app/638970/discussions/0/1743343017611794579/[/url]\n<br />LodMod for Yakuza Kiwami: [url=https://steamcommunity.com/app/834530/discussions/0/2800630252895668904/]https://steamcommunity.com/app/834530/discussions/0/2800630252895668904/[/url]\n<br />Dragon Quest XI S: [url=https://steamcommunity.com/app/1295510/discussions/0/3117025249764261520/]https://steamcommunity.com/app/1295510/discussions/0/3117025249764261520/[/url]\n<br />NieR Automata LodMod: \n<br />[url=https://www.nexusmods.com/nierautomata/mods/165]https://www.nexusmods.com/nierautomata/mods/165[/url]"
url=
hasCustomURL=false
lastNexusQuery=2023-07-13T12:45:15Z
lastNexusUpdate=2023-07-13T12:45:15Z
nexusLastModified=2022-11-18T12:24:29Z
converted=false
validated=false
color=@Variant(\0\0\0\x43\0\xff\xff\0\0\0\0\0\0\0\0)
tracked=0
endorsed=1

[installedFiles]
1\modid=69833
1\fileid=1000101260
size=1
